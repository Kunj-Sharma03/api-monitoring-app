create table public.alerts (
  id serial not null,
  monitor_id integer null,
  triggered_at timestamp without time zone null default now(),
  reason text null,
  error_message text null,
  constraint alerts_pkey primary key (id),
  constraint alerts_monitor_id_fkey foreign KEY (monitor_id) references monitors (id) on delete CASCADE
) TABLESPACE pg_default;

create table public.monitor_logs (
  id serial not null,
  monitor_id integer null,
  timestamp timestamp without time zone null default now(),
  status text null,
  status_code integer null,
  response_time integer null,
  constraint monitor_logs_pkey primary key (id),
  constraint monitor_logs_monitor_id_fkey foreign KEY (monitor_id) references monitors (id) on delete CASCADE
) TABLESPACE pg_default;

create table public.monitors (
  id serial not null,
  user_id integer null,
  url text not null,
  interval_minutes integer null default 5,
  alert_threshold integer null default 3,
  is_active boolean null default true,
  last_alert_sent_at timestamp without time zone null,
  status_change_count integer null default 0,
  created_at timestamp without time zone null default CURRENT_TIMESTAMP,
  last_checked_at timestamp without time zone null,
  constraint monitors_pkey primary key (id),
  constraint monitors_user_id_fkey foreign KEY (user_id) references users (id)
) TABLESPACE pg_default;

create table public.users (
  id serial not null,
  email text not null,
  password_hash text not null,
  constraint users_pkey primary key (id),
  constraint users_email_key unique (email)
) TABLESPACE pg_default;